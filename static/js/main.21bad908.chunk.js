(window.webpackJsonplgui=window.webpackJsonplgui||[]).push([[0],{163:function(e,t,a){e.exports=a(242)},168:function(e,t,a){},186:function(e,t){},188:function(e,t){},241:function(e,t,a){},242:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(9),l=a.n(r),o=(a(168),a(30)),i=a(21),u=a(292),s=a(296),m=a(295),b=a(293),f=a(294),d=a(289),j=a(307),p=function(e){return{type:"add-flash-message",value:e}},v=function(e){return{type:"connection-created",conn:e}},y=a(291),E=a(33),h=function(e){var t=e?e.split("?")[1]:window.location.search.slice(1),a={};if(t)for(var n=(t=t.split("#")[0]).split("&"),c=0;c<n.length;c++){var r=n[c].split("="),l=r[0],o="undefined"===typeof r[1]||r[1];if(l.match(/\[(\d+)?\]$/)){var i=l.replace(/\[(\d+)?\]/,"");if(a[i]||(a[i]=[]),l.match(/\[\d+\]$/)){var u=/\[(\d+)\]/.exec(l)[1];a[i][u]=o}else a[i].push(o)}else a[l]?a[l]&&"string"===typeof a[l]?(a[l]=[a[l]],a[l].push(o)):a[l].push(o):a[l]=o}return a},g=a(88),O=a(16),w=a(11),k=["Account","Contact","User","Lead","Opportunity","Case"],C=new(function(){function e(){Object(O.a)(this,e)}return Object(w.a)(e,[{key:"get",value:function(e){return localStorage.getItem(e)}},{key:"set",value:function(e,t){localStorage.setItem(e,t)}},{key:"setObject",value:function(e,t){localStorage.setItem(e,JSON.stringify(t))}},{key:"getObject",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=localStorage.getItem(e);return null===a?(this.setObject(e,t),t):JSON.parse(a)}},{key:"remove",value:function(e){localStorage.removeItem(e)}}]),e}()),S={Key:"lgui-settings",AllowedStandardObjects:k,Default:{objects:k,views:{}}},x=a(152),I=function(e,t,a){return"SELECT ".concat(t.join(",")," FROM ").concat(e)},N=Object(E.f)(function(e){var t=Object(n.useState)([]),a=Object(o.a)(t,2),r=a[0],l=a[1],v=Object(n.useState)({}),E=Object(o.a)(v,2),O=E[0],w=E[1],k=Object(n.useState)([]),N=Object(o.a)(k,2),A=N[0],D=N[1],F=Object(i.b)(),K=Object(i.c)(function(e){return e.conn}),T=Object(i.c)(function(e){return e.flash}),L=h(window.location.href),W=Object(n.useState)(function(e){return e.fields?e.fields.split(","):["Id"]}(L)),z=Object(o.a)(W,2),J=z[0],M=z[1],V=Object(n.useCallback)(function(t){F({type:"set-overlay"}),K.sobject(e.object).destroy(t,function(a,n){if(a||!n.success)return F({type:"clear-overlay"}),void p(a);var c=I(e.object,J);K.query(c,function(e,a){if(e)return p(e),void F({type:"clear-overlay"});l(a.records),F(p("".concat(t," record is deleted"))),F({type:"clear-overlay"})})})},[e.object,J,L]),q=Object(n.useCallback)(function(){F({type:"clear-flash-message"})},[]),G=Object(n.useCallback)(function(e){w(e)},[]),U=Object(n.useCallback)(function(){J.push(O.value),console.log(O),M(J);var t=I(e.object,J);K.query(t,function(e,t){if(e)return p(e),void F({type:"clear-overlay"});l(t.records),F({type:"clear-overlay"})})},[J,O,e.object,L]),Z=Object(n.useCallback)(function(){var t=C.getObject(S.Key,S.Default),a=t.views[e.object],n={fields:J};a?a.push(n):t.views[e.object]=[n],C.setObject(S.Key,t),F(p("view is created"))},[e.object]);Object(n.useEffect)(function(){F({type:"set-overlay"});var t=I(e.object,J);K.query(t,function(e,t){if(e)return p(e),void F({type:"clear-overlay"});l(t.records),F({type:"clear-overlay"})}),K.sobject(e.object).describe(function(e,t){if(e)p(e);else{var a=t.fields.map(function(e){return{label:e.name,value:e.name}});D(a),w(a[0])}})},[]);var B=Object(n.useMemo)(function(){var e=[];return e.push(J),r.forEach(function(t){var a=J.reduce(function(e,a){return e.push(t[a]),e},[]);e.push(a)}),e},[r,J]);return c.a.createElement(d.a,{component:"main",maxWidth:"md"},c.a.createElement(c.a.Fragment,null,T.length>0&&c.a.createElement(j.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},key:"flash-message",open:!0,onClose:q,ContentProps:{"aria-describedby":"message-id"},message:c.a.createElement("span",{id:"message-id"},T)}),c.a.createElement(y.a,{variant:"contained",color:"primary",onClick:function(){e.history.push("/".concat(e.object,"/new/"))}},"Create"),c.a.createElement(g.a,{className:"fields",value:O,onChange:G,options:A}),c.a.createElement(y.a,{variant:"contained",color:"primary",onClick:U},"Add Field"),c.a.createElement(y.a,{variant:"contained",color:"primary",onClick:Z},"Save View"),c.a.createElement(x.CSVLink,{data:B},"Download me"),c.a.createElement("h2",null,e.object," List"),0!==r.length&&c.a.createElement(u.a,{size:"small"},c.a.createElement(b.a,null,c.a.createElement(f.a,null,c.a.createElement(m.a,null,"Action"),J.map(function(e){return c.a.createElement(m.a,{key:e},e)}))),c.a.createElement(s.a,null,r.map(function(t){return c.a.createElement(f.a,{key:t.Id},c.a.createElement(m.a,{key:"action"},c.a.createElement("a",{href:"#",onClick:function(){return e.history.push("/".concat(e.object,"/").concat(t.Id,"/"))}},"Edit")," | \xa0",c.a.createElement("a",{href:"#",onClick:function(){V(t.Id)}},"Delete")),J.map(function(e){return c.a.createElement(m.a,{key:e},t[e])}))})))))}),A=a(3),D=a(297),F=a(303),K=a(299),T=a(305),L=a(298),W=a(155),z=a(244),J=Object(W.a)(function(e){return{"@global":{body:{backgroundColor:e.palette.common.white}},paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)}}}),M=Object(E.f)(function(e){var t=J(),a=[{name:"FirstName",label:"First Name"},{name:"LastName",label:"Last Name"},{name:"email",label:"Email"},{name:"address",label:"Address"}],r=Object(n.useState)({}),l=Object(o.a)(r,2),u=l[0],s=l[1],m=Object(i.c)(function(e){return e.conn}),b=Object(i.b)(),f=Object(n.useCallback)(function(t){t.preventDefault(),b({type:"set-overlay"}),e.id?m.sobject(e.object).update(Object.assign({},u,{Id:e.id}),function(t,a){b({type:"clear-overlay"}),t?p(t):(b(p("".concat(e.id," record is updated"))),e.history.push("/".concat(e.object)))}):m.sobject(e.object).create(u,function(t,a){b({type:"clear-overlay"}),t?p(t):(b(p("".concat(a.id," record is created"))),e.history.push("/".concat(e.object)))})},[e.id,e.object]);return Object(n.useEffect)(function(){null!==e.id&&m.sobject(e.object).retrieve(e.id,function(e,t){var n={},c=a.map(function(e){return e.name});for(var r in t)c.includes(r)&&(n[r]=t[r]);var l=h(window.location.href);s(function(e){return Object.assign(n,l)})})},[e.object,e.id]),c.a.createElement(d.a,{component:"main",maxWidth:"md"},c.a.createElement(D.a,null),c.a.createElement("div",{className:t.paper},c.a.createElement(z.a,{component:"h1",variant:"h5"},"Create Record"),c.a.createElement("form",{className:t.form,noValidate:!0},c.a.createElement(L.a,{container:!0,spacing:2},a.map(function(e){return c.a.createElement(L.a,{item:!0,xs:12,sm:6,key:e.name},c.a.createElement(F.a,{autoComplete:"fname",name:e.name,variant:"outlined",fullWidth:!0,id:e.name,label:e.label,onChange:(t=e.name,function(e){var a=e.target.value;s(function(e){return Object.assign({},e,Object(A.a)({},t,a))})}),value:u[e.name]?u[e.name]+"":""}));var t}),c.a.createElement(L.a,{item:!0,xs:12},c.a.createElement(K.a,{control:c.a.createElement(T.a,{value:"allowExtraEmails",color:"primary"}),label:"I want to receive inspiration, marketing promotions and updates via email."}))),c.a.createElement(y.a,{type:"submit",variant:"contained",color:"primary",className:t.submit,onClick:f},"Create"))))}),V=a(90),q=function(e){var t=Object(i.b)(),a=Object(i.c)(function(e){return e.conn});return Object(n.useEffect)(function(){V.browser.connection&&""!==V.browser.connection.instanceUrl?t(v(V.browser.connection)):(V.browser.login(),V.browser.on("connect",function(e){t(v(e))}))},[]),null==a?c.a.createElement(c.a.Fragment,null):c.a.createElement(c.a.Fragment,null,e.children)},G=function(e){var t=Object(i.b)(),a=C.getObject(S.Key,S.Default),r=Object(n.useState)(a.objects),l=Object(o.a)(r,2),u=l[0],s=l[1],m=Object(n.useState)({}),b=Object(o.a)(m,2),f=b[0],d=b[1],j=Object(n.useState)([]),v=Object(o.a)(j,2),E=v[0],h=v[1],O=Object(i.c)(function(e){return e.conn}),w=Object(n.useCallback)(function(e){d(e)},[]),k=Object(n.useCallback)(function(){a.objects.push(f.value),C.setObject(S.Key,a),s(a.objects)},[f.value]),x=function(e){return function(){var t=a.objects.findIndex(function(t){return t===e});a.objects.splice(t,1),C.setObject(S.Key,a),s(a.objects)}},I=Object(n.useMemo)(function(){return E.map(function(e){return{label:e,value:e}})},[E]);return Object(n.useEffect)(function(){t({type:"set-overlay"}),O.describeGlobal(function(e,a){if(e)return p(e),void t({type:"clear-overlay"});var n=a.sobjects.filter(function(e){return e.queryable&&(e.custom||S.AllowedStandardObjects.includes(e.name))&&!u.includes(e.name)}).map(function(e){return e.name});h(n);var c=n[0];d({label:c,value:c}),t({type:"clear-overlay"})})},[]),c.a.createElement("div",null,c.a.createElement("table",null,c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",null,"Action"),c.a.createElement("th",null,"Object"))),c.a.createElement("tbody",null,u.map(function(e){return c.a.createElement("tr",{key:e},c.a.createElement("td",null,c.a.createElement("a",{href:"#",onClick:x(e)},"Delete")),c.a.createElement("td",null,e))}))),c.a.createElement("h2",null,"New Object Tab"),c.a.createElement("form",null,c.a.createElement(g.a,{className:"describe-object",value:f,onChange:w,options:I}),c.a.createElement(y.a,{onClick:k},"Add")))},U=(a(241),a(108)),Z=a(300),B=a(304),R=a(301),$=Object(E.f)(function(e){var t=window.location.pathname.match(/^(\/[a-zA-Z\d_]+)\/[a-zA-Z\d]+/),a=t?t[1]:window.location.pathname,r=Object(n.useState)(a),l=Object(o.a)(r,2),i=l[0],u=l[1],s=Object(n.useCallback)(function(t,a){u(a),e.history.push(a)},[]);return c.a.createElement("div",null,c.a.createElement(Z.a,{position:"static"},c.a.createElement(B.a,{value:i,onChange:s},c.a.createElement(R.a,{label:"Home",value:"/"}),e.objects.map(function(e){return c.a.createElement(R.a,{key:e,label:e,value:"/".concat(e)})}),c.a.createElement(R.a,{label:"Setting",value:"/setting"}))))}),_=a(85),X={message:"hoge",conn:null,flash:[],overlay:!1},Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"message-change":return Object.assign({},e,{message:t.value});case"connection-created":return Object.assign({},e,{conn:t.conn});case"add-flash-message":return Object.assign({},e,{flash:e.flash.concat(t.value)});case"clear-flash-message":return Object.assign({},e,{flash:[]});case"set-overlay":return Object.assign({},e,{overlay:!0});case"clear-overlay":return Object.assign({},e,{overlay:!1})}return e};a(90);var H=function(){return c.a.createElement(y.a,{variant:"contained",color:"primary",onClick:function(){}},"Login with Salesforce")},P=a(302),Q=function(){var e=Object(i.c)(function(e){return e.overlay});return c.a.createElement(c.a.Fragment,null,e&&c.a.createElement("div",{className:"overlay"},c.a.createElement(P.a,{className:"circular-progress"})))},ee=C.getObject(S.Key,S.Default);a(90).browser.init({clientId:"3MVG9yZ.WNe6byQBYCaGTfGZBIwoVDFt8TFZTdt3Umcg0WEU4hFD7a0AdXKrGMxTyREzOyqKMXlVpYKyJeJk7",redirectUri:"https://tzmfreedom.github.io/lgui"});var te=function(){return c.a.createElement("div",null)},ae=function(){return c.a.createElement(i.a,{store:Object(_.b)(Y)},c.a.createElement("div",{className:"App"},c.a.createElement(U.a,null,c.a.createElement($,{objects:ee.objects}),c.a.createElement(E.c,null,ee.objects.map(function(e){return c.a.createElement(E.a,{key:e,exact:!0,path:"/"+e,render:function(t){return c.a.createElement(q,null,c.a.createElement(N,Object.assign({object:e},t)))}})}),ee.objects.map(function(e){return c.a.createElement(E.a,{key:e+"_create",exact:!0,path:"/"+e+"/new",render:function(t){return c.a.createElement(q,null,c.a.createElement(M,Object.assign({object:e},t)))}})}),ee.objects.map(function(e){return c.a.createElement(E.a,{key:e+"_update",exact:!0,path:"/"+e+"/:id",render:function(t){return c.a.createElement(q,null,c.a.createElement(M,Object.assign({object:e,id:t.match.params.id},t)))}})}),c.a.createElement(E.a,{exact:!0,path:"/",component:te}),c.a.createElement(E.a,{exact:!0,path:"/login",component:H}),c.a.createElement(E.a,{exact:!0,path:"/setting",render:function(e){return c.a.createElement(q,null,c.a.createElement(G,e))}})),c.a.createElement(Q,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(c.a.createElement(ae,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[163,1,2]]]);
//# sourceMappingURL=main.21bad908.chunk.js.map